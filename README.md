Установим LXC и шаблоны:
sudo apt install lxc lxc-templates uidmap
Затем командой "$ lxc version" проверяем установленную версию. Видим как система подсказывает, что для начала необходимо инициализировать LXD на машине. Вводим команду:

lxd init
После инициализации снова убеждаемся, что все нормально установлено, путем проверки версии LXC:

lxc version

![фото1](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/dcc9f72b-9702-47ed-8782-60fa7ce90a5e)


Следующей командой создаем новый контейнер с именем test1 и задаем путь для файла конфигурации:
lxc-create -n test1 -t ubuntu -f /usr/share/doc/lxc/lxc-veth.conf 
Видим большое количество текста, значит команда введена правильно. В тексте указана ошибка открытия файла конфигурации указанного нами. На запуск контейнера это не повлияет, а случается из-за того, что такого файла на данном этапе не существует.

![фото2](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/2b0c94e7-10c7-414c-bb3e-988faa237fbc)


После того как контейнер установился мы видим следующий текст (установка прошла быстро т.к. делал это многократно):

![фото3](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/df73e8b2-9d72-4f06-a08a-d4430db348ca)


Система оповещает нас о том, что контейнер создан, у него заданы стандартные параметры (логин: ubuntu, пароль: ubuntu).

Теперь необходимо запустить созданный нами контейнер. Для этого вводим следующую команду:
sudo lxc-start -d -n test1
![фото4](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/181e6ece-e444-4caf-809a-9331e92bf6b7)


Если система никак не оповестила нас ни о чем, значит команда успешно выполнена. Проверить это можно, например, путем входа в контейнер:

sudo lxc-attach -n test1
Видим, что мы зашли в test1 под root.
![фото5](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/19dc4c90-48a3-4bf3-99b0-f8448b51ba42)


Вводим следующую команду для просмотра выделенной и свободной памяти:
free -m

![фото6](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/b3c2e9d2-b809-4e16-aa1a-50428d6a7404)

Для удобства сразу перейдем в нужную папку:

cd sys/fs/cgroup
Считываем данные из файла, в котором ограничивается потребление памяти контейнером:

cat memory.max
Здесь мы можем наблюдать, что ограничение памяти установлено на максимальное значение.


![фото7](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/c3077fc7-8708-4b30-bcc8-ce16e6813b67)

Далее выполним это же из папки .lxc:


![фото8](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/ed1103a0-0fef-4bb7-ab72-e1bfd71c261d)

Убеждаемся в максимальном значении. Выходим из контейнера:

exit
Для того, что бы ограничить потребление памяти контейнером, необходимо добавить строку в файл конфигурации. Для начала считаем информацию из него и убедимся, что ограничений командой там нет:

sudo cat /var/lib/lxc/test1/config

![фото9](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/462e2842-ece8-4a39-957c-c2d4f233fc40)

После этого любым удобным редактором (я делал через редактор nano) добавляем в этот файл конфигурации вниз текста следующую строку:

lxc.cgroup2.memory.max = 256M
![фото10](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/b22527d3-4ead-4447-a895-dce01f4cbdd8)


Таким образом мы ограничили потребление памяти не более 256 мб. Останавливаем контейнер и снова запускаем его. Вводим следующую команду, что бы убедиться, что ограничение работает:

sudo cat /sys/fs/cgroup/lxc.payload.test1/memory.max
![12](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/164c3446-4f0d-41f9-880e-b7e5c1a4e0bd)


Как мы видим, система пересчитала и выдала результат, где много цифр. Не пугаемся, это значение примерно равно 256 мб.

Далее просмотрим список имеющихся в нашей системе контейнеров:
sudo lxc-ls -f
У нас имеется один контейнер test1, он запущен и в автозапуске стоит 0 (что означает, что автозапуск контейнера отключен). Нам необходимо включить автозапуск, для этого открываем файл конфигурации в редакторе nano:

sudo nano /var/lib/lxc/test1/config
![13](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/f24bd0a1-af7c-428b-9be0-6fc6c9cb4f92)


Добавляем в конец текста файла конфигурации следующую строку:

lxc.start.auto = 1
Сохраняем, закрываем редактор и перезагружаем систему, например командой '$ reboot'.

После перезагрузки снова выполняем команду:

sudo lxc-ls -f
Вводим пароль root и убеждаемся, что контейнер запущен и автозапуск включен.

![14](https://github.com/Anastasia-2-0/Konteiner_2hw/assets/114282543/a940928a-6f38-4390-9957-af06275824c2)

При запуске контейнера можно в параметрах команды указать, где хранить логи, например:
lxc-start -n test1 --logfile log.log
Для удаления контейнера необходимо воспользоваться следующей командой:
lxc-destroy -n test1
